# مشروع: نظام إدارة الطلاب والدرجات باستخدام بايثون
# فكرة المشروع:
# هذا مشروع شبه حقيقي يطبق فكرة القوائم المتداخلة (صندوق داخل صندوق).
# نمثل كل طالب بقائمة صغيرة فيها [اسم الطالب, الدرجة],
# وجميع الطلاب نضعهم داخل قائمة كبيرة واحدة.
# نوفر للمستخدم قائمة خيارات (قائمة أوامر) لإضافة طالب,
# عرض جميع الطلاب, تعديل درجة, حذف طالب, وحساب متوسط الدرجات.

# أولاً: إنشاء قائمة الطلاب الأساسية
# المتغير students يمثل "الصندوق الكبير" الذي يحتوي بيانات كل الطلاب.
# نضع فيه بعض الطلاب كبداية حتى لا تكون القائمة فارغة.
students = [['student1', 90], ['student2', 85], ['student3', 70]]

# حلقة لا نهائية لتكرار عرض القائمة حتى يختار المستخدم الخروج
# نستخدم while True حتى يبقى البرنامج يعمل إلى أن يختار المستخدم إنهاء النظام.
while True:

    # طباعة قائمة الخيارات للمستخدم
    # نوضح كل رقم ماذا يفعل حتى يختار المستخدم العملية المناسبة.
    print('\nنظام إدارة الطلاب والدرجات')
    print('1 - عرض كل الطلاب')
    print('2 - إضافة طالب جديد')
    print('3 - تعديل درجة طالب')
    print('4 - حذف طالب')
    print('5 - حساب متوسط الدرجات')
    print('6 - إنهاء النظام')

    # طلب إدخال اختيار المستخدم
    # نستخدم input للحصول على رقم الخيار من المستخدم على شكل نص.
    choice = input('اختر رقم العملية التي تريد تنفيذها: ')

    # التحقق من اختيار عرض كل الطلاب
    # إذا أدخل المستخدم الرقم 1 نطبع جميع الطلاب الموجودين في القائمة.
    if choice == '1':
        print('\nقائمة الطلاب الحالية:')
        print(students)

    # التحقق من اختيار إضافة طالب جديد
    # إذا أدخل المستخدم الرقم 2 نطلب منه اسم الطالب ودرجته ثم نضيفه إلى القائمة.
    elif choice == '2':
        # طلب اسم الطالب الجديد من المستخدم
        new_name = input('أدخل اسم الطالب الجديد: ')
        # طلب درجة الطالب الجديد من المستخدم وتحويلها إلى رقم صحيح
        new_grade = int(input('أدخل درجة الطالب الجديد: '))
        # إضافة الطالب الجديد إلى نهاية قائمة الطلاب باستخدام append
        students.append([new_name, new_grade])
        # طباعة رسالة تأكيد
        print('تمت إضافة الطالب بنجاح.')
        # طباعة قائمة الطلاب بعد الإضافة
        print('قائمة الطلاب بعد الإضافة:')
        print(students)

    # التحقق من اختيار تعديل درجة طالب
    # إذا أدخل المستخدم الرقم 3 نبحث عن الطالب بالاسم ثم نعدل درجته.
    elif choice == '3':
        # طلب اسم الطالب الذي نريد تعديل درجته
        search_name = input('أدخل اسم الطالب الذي تريد تعديل درجته: ')
        # متغير يساعدنا نعرف هل وجدنا الطالب أم لا
        found = False
        # نمر على كل طالب في قائمة الطلاب
        for student in students:
            # إذا كان اسم الطالب يطابق الاسم الذي أدخله المستخدم
            if student[0] == search_name:
                # نطلب الدرجة الجديدة من المستخدم
                new_grade = int(input('أدخل الدرجة الجديدة: '))
                # نغير الدرجة القديمة بالدرجة الجديدة
                student[1] = new_grade
                # نغيّر قيمة found إلى True لأننا وجدنا الطالب
                found = True
                # نطبع رسالة تأكيد
                print('تم تعديل درجة الطالب بنجاح.')
                # نطبع بيانات الطالب بعد التعديل
                print('البيانات الجديدة للطالب:', student)
                # نخرج من الحلقة لأننا لا نحتاج البحث عن المزيد
                break
        # بعد انتهاء الحلقة إذا لم نجد الطالب نخبر المستخدم بذلك
        if not found:
            print('لم يتم العثور على طالب بهذا الاسم.')

    # التحقق من اختيار حذف طالب
    # إذا أدخل المستخدم الرقم 4 نبحث عن الطالب بالاسم ثم نحذفه من القائمة.
    elif choice == '4':
        # طلب اسم الطالب الذي نريد حذفه
        delete_name = input('أدخل اسم الطالب الذي تريد حذفه: ')
        # متغير لمعرفة هل تم الحذف أم لا
        deleted = False
        # نمر على قائمة الطلاب باستخدام نسخة منها لتجنب مشاكل أثناء الحذف
        for student in students[:]:
            # إذا وجدنا الطالب المطلوب
            if student[0] == delete_name:
                # نحذفه من القائمة باستخدام remove
                students.remove(student)
                deleted = True
                print('تم حذف الطالب بنجاح.')
                print('قائمة الطلاب بعد الحذف:')
                print(students)
                # نخرج من الحلقة بعد الحذف
                break
        # إذا لم نجد طالب بهذا الاسم نطبع رسالة مناسبة
        if not deleted:
            print('لم يتم العثور على طالب بهذا الاسم.')

    # التحقق من اختيار حساب متوسط الدرجات
    # إذا أدخل المستخدم الرقم 5 نحسب متوسط درجات جميع الطلاب.
    elif choice == '5':
        # إذا كانت القائمة فارغة لا يمكن حساب المتوسط
        if len(students) == 0:
            print('لا يوجد طلاب في القائمة لحساب المتوسط.')
        else:
            # متغير لجمع مجموع الدرجات
            total = 0
            # نمر على كل طالب ونضيف درجته إلى المجموع
            for student in students:
                total = total + student[1]
            # نحسب المتوسط بقسمة المجموع على عدد الطلاب
            average = total / len(students)
            # نطبع متوسط الدرجات
            print('متوسط درجات الطلاب هو:')
            print(average)

    # التحقق من اختيار إنهاء النظام
    # إذا أدخل المستخدم الرقم 6 نخرج من الحلقة وننهي البرنامج.
    elif choice == '6':
        print('تم إنهاء نظام إدارة الطلاب.')
        break

    # في حالة أن المستخدم أدخل رقم غير صحيح نطبع رسالة توضح ذلك
    else:
        print('اختيار غير صحيح، حاول مرة أخرى.')
